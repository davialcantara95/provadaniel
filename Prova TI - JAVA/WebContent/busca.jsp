<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<title>Daniel - Prova de TI JAVA WEB</title>
</head>
<body class="bg-light">
    <div class="container">
  <div class="py-5 text-center">
 
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAdVBMVEUAAAD////l5eU6Ojrd3d0pKSkdHR0hISFaWlqrq6uOjo6
    Ghob4+PiwsLDo6OjKysozMzN2dnbu7u4VFRWenp7S0tKlpaVpaWm7u7s1NTX19fVTU1NJSUmVlZVERER/f39gYGAsLCy3t7dxcXE/Pz8ODg4XFxdH1CJ0AAAEr0lEQVR4nO3aa3ui
    OhQFYIJ4qwiK4gW01dY5//8nHrKDliQ7MtThgWHW+2mKAffiEpI4ngcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/ivlX1xW07E2IvOsaWnYQ0XvXNbRrkwp/03
    URLUtE/KvrGtqVh2LedQ0ty8XgIxYd6rrrGlq2E+Gl6xpathTZresaWhYIv+sSNL8mFb/b1cu2zjffNBAp+6Hca2p9/1Ru5poyjMNuntZxl0d+VRCvR3W7eLHcJ3IO0U6ZOHDb5fET
    M+I6KQ4VGxvHgc+Jznqzc1FHtK2rdiYs6eL5LjfVjE2hvlmIM7OZ9jITLuTGwNg4Du2qpJ3ebC63LZ8XyyYUIpk92+WgGoVHV4PilSGYs9SnhPw1KL1nZRvn/SETCvskdZqwfBij
    7HGwT+ce83uTzOo2qgnD06sJa5/DBgmj00o6jk6XhV9zFTd0FqjVx7OEIri+mPB0XemOxs5NEo4rWy6BinjhdzjLzw57iuk4pkpo1d00oXmGLD9N6Hmfwl3/hq7e3qPT4BiCUkI/M
    XvbpglXdbX/PGHZW+659nTxojJFyh+TPov3Zs/Qp4TFVNZV/+PaUb38CFQllCfjrbq5Vwk/qDdkRi17+d2+fEJ29DyyxywTelv9Ye5
    VQs/VV8ZyO70IT7JPzdilp3vCooSs8s7oV0LHFZpSlerf9LDurCZeJWFxQiovzR71pYWL3JzwxyyDn+S/M+6Y3wknkUgfE5amCa2i2Gp+mnDFlj+SPVB4H4/RHcsNDL4TetdEP
    CYOTRNazK7vpYRXNqH+ilhTccycspJQXun7ndyvhGM2Ib1ELvqfzFuzmlCeh3Ke0a+E7F26MC7agvtaM6H866OHCdluJJUbKw+eeiwv1jH1hEWnG1LH3zThcqebm3POlxKemXNGTbX
    +dadHuTMSFl1SIpdGmiZ0Tc4eXkpIl8uY4lLfGZ9mD/kXFW2tBZkJxwFlaJqw1Tf+LNT7FCn/nh7rrHV8M6E3yeSfvUpIlzDQq1k6AorEXLCxEnqzrDgPfUpIA2/zJnUFtFed7IT
    ynbFmH65uEqo5eqg33LoTmqM7JmF50vqRcFouNWlzO9lbFD6/1jpVuDEJ4RLeF7A6SlhZsMiXiSrFmFjQEC2xv5RmGMZrhU1YLhw0SFi7Xk8Ja3+vVKuJgeIn2X00kRq/JfiO85VTa
    32uzCdUywMNEgYmX7+tVMLgTXc2F2odK8Kp0ffQbIpdtAjsOI6Ex6RZQhu3IlzXiE8YWnOimLlxFVqayrSL6EjoHTP71vvzCc2leCZheLAWaNSPMezi24QuovY0uBJ6X/Z8sv2EFyNd8
    HlmxoPUSzgWgKlGUd3CDWqVN77fNY985QOavQo/BjHv0s2oajXmO7Cj/NC1qnArPrtVJ8JT2ZpfZdl+LxEoE7m31UWPWDejgjHbqHbA3rJintF1CW2LmZnMsBwj148Bg/Ee1o+0/nL70
    P3z8UAUw/Wh/3firWP0MCAHEVk/8w9MKn9lHbT/fHbgOiR56PqfHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/tf8B9+Q6kHCT/IwAAAAASUVORK5CYII=" style="box-shadow: 5px -5px 3px #000;">
    <h1 style="font-size:1.3em;"><i>Daniel Law Advogados</i></h1>
    <br>
       <h2>Seja Bem-vindo</h2>
    <p class="lead" style="font-size:1.5em;">Olá avaliador, aqui está implementado os componentes de busca e cadastro com AJAX, JavaWeb, MVC. Ao digitar o Nº do processo Ex: <b>WO2002008676</b> e clicar no botão <b>"Scannear informações"</b> será possível está buscando as informações do site WIPO e também está salvando as informações no banco dados. Para consultar as informações salvas no banco de dados basta acionar o botão <b>"buscar"</p>
  </div>
  <div class="row">
    <div class="col-md-12 order-md-1">
    <div class="input-group">
          <input type="text" class="form-control"  placeholder="Ex: WO/2002/008676 ou WO2002008676 " id="txt_buscar" name="txt_buscar" requerid>
          <div class="input-group-append">
            <button type="btn" class="btn btn-secondary" onclick="buscar()">Buscar 
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-search" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"></path>
                    <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"></path>
                </svg>
              </button>
          </div>
            
        </div>
        <br> 
        <div class="input-group">
          <input type="text" class="form-control"  placeholder="Ex: WO2002008676" id="id_processo" name="id_processo" requerid>
          <div class="input-group-append">
            <button type="btn" class="btn btn-secondary" onclick="salvar()">Scannear informações 
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-search" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"></path>
                    <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"></path>
                </svg>
              </button>
          </div>
            
        </div>
        <br>
           
        <br>
        <div id="retorno">
        
        </div>
        <center>
            <div class="spinner-border" role="status" style="display: none;" id="status">
                    <span class="sr-only">Loading...</span>
            </div>
        </center>
        
    </div>
  </div>

  <footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1">Olá avaliador,  Se quiser conhecer um pouco mais do meu trabalho com outras linguagens só acessar meu <a href="https://www.youtube.com/channel/UCena9ieEjqKrR4A1kEgNe2Q?view_as=subscriber">canal no youtube</a> </p>
  </footer>
</div>
</body>
<script>
window.onload = initPage;
//Informa ao usuário caso a operação tenha sido realizada com sucesso!
function initPage(){
var msg ="<%=request.getAttribute("msg")%>";

if(msg == "null"){
	
}else{
	alert(msg);

}
}

//AJAX responsável por buscar as informações do BANCO DE DADOS
function buscar(){
	var buscar = document.getElementById("txt_buscar").value;
	$.post("process?acao=buscar&txt_buscar="+buscar, function (retorno){ 

	if(retorno == ""){
		alert('Não encontrado verifique se digitou corretamente');
		}
	        document.getElementById("retorno").innerHTML = retorno; 
      
     });
}
//AJAX responsável por buscar a informações do site exterior
function salvar(cont){
	
	
	var id = document.getElementById("id_processo").value;
	if(id == ""){
		alert("Preencha os campos");}else{
	try {
		$.post("process?acao=consulta&id_processo="+id, function (retorno){ 
	         document.getElementById("retorno").innerHTML = retorno; 
	      });
		}
		catch(err) {
		 retorno ="para";
		}
		finally {
			
			if(retorno == "[object HTMLDivElement]"){
				$.post("process?acao=consulta&id_processo="+id, function (retorno){ 
			         document.getElementById("retorno").innerHTML = retorno; 
			       
			     
			      });
				  document.getElementById("status").style.display = "block"
			}

			if(retorno == "[object HTMLDivElement]"){
				$.post("process?acao=consulta&id_processo="+id, function (retorno){ 
			         document.getElementById("retorno").innerHTML = retorno; 
			     
			      });
			}
			
			if(retorno == "[object HTMLDivElement]"){
				$.post("process?acao=consulta&id_processo="+id, function (retorno){ 
			         document.getElementById("retorno").innerHTML = retorno; 
			     
			      });
			}

			if(retorno == "[object HTMLDivElement]"){
				$.post("process?acao=consulta&id_processo="+id, function (retorno){ 
			         document.getElementById("retorno").innerHTML = retorno; 
			     
			      });
			}

			if(retorno == "[object HTMLDivElement]"){
				$.post("process?acao=consulta&id_processo="+id, function (retorno){ 
			         document.getElementById("retorno").innerHTML = retorno; 
			     
			      });
			}
			if(retorno == "[object HTMLDivElement]"){

				function ContarSegundos(){
					document.getElementById("status").style.display = "none";
					document.getElementById("retorno").innerHTML = "Não encontrado! Tente novamente a conexão com o site hospedeiro das informações pode está ruim";
				}
				setTimeout(ContarSegundos, 1000);
				
				}	  
		}	
	}}
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>  
</html>